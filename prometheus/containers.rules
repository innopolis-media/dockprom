ALERT Consul_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="consul",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT MicroApi_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-micro-api",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT MySql_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-mysql",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT Rabbit_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-rabbit",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT Redis_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-redis",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT Mongo_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-mongo",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT Site_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-site",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT Median_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-median",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT Admin_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-admin",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }
  
ALERT ArticlePostProcessor_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-article-pp",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }  
  
ALERT Redirector_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-redirector",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  }  
  
ALERT DefPub_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-defpub",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  } 
  
ALERT RSS_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-rss",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  } 
  
ALERT Ubiqbot_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="ubiqbot",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  } 
  
ALERT Webpush_Is_Down_Production
  IF absent(container_memory_usage_bytes{name="hfm-webpush",instance="10.8.0.18:8080",job="cadvisor"})
  FOR 1m
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 1m"
  } 










ALERT Consul_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="consul",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (stage-1) is down for more than 30s"
  }
  
ALERT MicroApi_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-micro-api",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (stage-1) is down for more than 30s"
  }

ALERT Redis_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-redis",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (stage-1) is down for more than 30s"
  }
  
ALERT Site_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-site",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (stage-1) is down for more than 30s"
  }
  
ALERT Median_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-median",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (stage-1) is down for more than 30s"
  }
  
ALERT Admin_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-admin",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (stage-1) is down for more than 30s"
  }
  
  
ALERT ArticlePostProcessor_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-article-pp",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 30s"
  }  
  
ALERT Redirector_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-redirector",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 30s"
  }  
  
ALERT DefPub_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-defpub",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 30s"
  } 
  
ALERT RSS_Is_Down_Stage
  IF absent(container_memory_usage_bytes{name="hfm-rss",instance="10.8.0.14:8080",job="cadvisor"})
  FOR 30s
  LABELS { severity = "critical" }
  ANNOTATIONS {
    summary= "{{ $labels.name }} ({{ $labels.instance }}) down",
    description= "{{ $labels.name }} on (prod-1) is down for more than 30s"
  } 